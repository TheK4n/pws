#!/usr/bin/env python3.10
import os
import sys
from getpass import getpass
__version__ = '0.1'

title = fr"""

         Password Storage
  _____   __          __   _____ 
 |  __ \  \ \        / /  / ____|
 | |__) |  \ \  /\  / /  | (___  
 |  ___/    \ \/  \/ /    \___ \ 
 | |         \  /\  /     ____) |
 |_|          \/  \/     |_____/   by TheK4n

Github  : https://github.com/TheK4n
Version : {__version__}

"""

help_title = r"""

"""

shadow = '.pws_shadow'
history = '.pws_history'


def init_all():
    if not os.path.exists(shadow):
        with open(shadow, 'w') as file:
            file.write('')
    if not os.path.exists(history):
        with open(history, 'w'):
            pass


def check_master_passwd():
    pass


def main_console():
    prompt = 'pws > '
    hst_file = open(history, 'a')

    while True:
        command = input(prompt)
        hst_file.write(command)

        match command:
            case "q" | "exit" | "quit":
                print('[-] PWS stopped')
                exit(0)
            case "help":
                print(help_title)
            case _:
                print(f"[-] Unknown command")


def main():
    print(title)
    getpass(prompt="[*] Master password: ")
    main_console()


if __name__ == '__main__':
    try:
        main()
    except EOFError:
        print('[-] PWS stopped', file=sys.stderr)
    except KeyboardInterrupt:
        print('[-] PWS stopped', file=sys.stderr)
